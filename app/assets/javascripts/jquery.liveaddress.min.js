(function(f,i,o){var s;var n=new j;var d="2.4.8";var l={candidates:3,autocomplete:10,requestUrl:"https://api.smartystreets.com/street-address",timeout:5000,speed:"medium",ambiguousMessage:"Choose the correct address",invalidMessage:"Address not verified",fieldSelector:"input[type=text], input:not([type]), textarea, select",submitSelector:"[type=submit], [type=image], [type=button]:last, button:last"};var u={};var c=[];var v="body";var y=0;var e=["street","street2","secondary","city","state","zipcode","lastline","addressee","urbanization","country"];f.LiveAddress=function(z){return f(v).LiveAddress(z)};f.fn.LiveAddress=function(A){if(s){return s}var z=this,B=z.prevObject?!!z.prevObject.prevObject:false;var C=f.fn.jquery.split(".");if(C.length>=2){if(C[0]<1||(C[0]==1&&C[1]<5)){console.log("jQuery version "+f.fn.jquery+" found, but LiveAddress requires jQuery version 1.5 or higher. Aborting.");return false}}else{return false}if(A.debug){console.log("LiveAddress API jQuery Plugin version "+d+" (Debug mode)")}if(o.readyState==="complete"){i.loaded=true}else{f(i).load(function(){i.loaded=true})}if(typeof A==="string"){u={key:A,candidates:l.candidates}}else{if(typeof A==="object"){u=f.extend(u,A)}}u.candidates=u.candidates||l.candidates;u.ui=typeof u.ui==="undefined"?true:u.ui;u.autoMap=typeof u.autoMap==="undefined"?true:u.autoMap;u.autoVerify=typeof u.autoVerify==="undefined"?true:u.autoVerify;u.submitVerify=typeof u.submitVerify==="undefined"?true:u.submitVerify;u.timeout=u.timeout||l.timeout;u.ambiguousMessage=u.ambiguousMessage||l.ambiguousMessage;u.invalidMessage=u.invalidMessage||l.invalidMessage;u.fieldSelector=u.fieldSelector||l.fieldSelector;u.submitSelector=u.submitSelector||l.submitSelector;u.requestUrl=u.requestUrl||l.requestUrl;u.autocomplete=typeof u.autocomplete==="undefined"?l.autocomplete:u.autocomplete;u.cityFilter=typeof u.cityFilter==="undefined"?"":u.cityFilter;u.stateFilter=typeof u.stateFilter==="undefined"?"":u.stateFilter;u.cityStatePreference=typeof u.cityStatePreference==="undefined"?"":u.cityStatePreference;u.geolocate=typeof u.geolocate==="undefined"?true:u.geolocate;u.candidates=u.candidates<1?0:(u.candidates>10?10:u.candidates);if(typeof u.autocomplete==="number"){u.autocomplete=u.autocomplete<1?false:(u.autocomplete>10?10:u.autocomplete)}s={events:t,on:function(F,E){if(!t[F]||typeof E!=="function"){return false}var G=t[F];t[F]=function(H,I){E(H,I,G)}},mapFields:function(F){var E=function(G){if(G==="auto"){return n.automap(z)}else{if(typeof G==="object"){return n.mapFields(G,z)}else{if(!G&&typeof u.addresses==="object"){return n.mapFields(u.addresses,z)}else{if(u.autoMap){return n.automap(z)}else{return false}}}}};if(f.isReady){E(F)}else{f(function(){if(!B){z=f(z.selector)}E(F)})}},makeAddress:function(E){if(typeof E!=="object"){return s.getMappedAddressByID(E)||new q({street:E})}else{return new q(E)}},verify:function(E,G){var F=s.makeAddress(E);m("VerificationInvoked",{address:F,verifyAccepted:true,invoke:G})},getMappedAddresses:function(){var G=[];for(var F=0;F<c.length;F++){for(var E=0;E<c[F].addresses.length;E++){G.push(c[F].addresses[E])}}return G},getMappedAddressByID:function(G){for(var F=0;F<c.length;F++){for(var E=0;E<c[F].addresses.length;E++){if(c[F].addresses[E].id()==G){return c[F].addresses[E]}}}},setKey:function(E){u.key=E},setCityFilter:function(E){u.cityFilter=E},setStateFilter:function(E){u.stateFilter=E},setCityStatePreference:function(E){u.cityStatePreference=E},activate:function(E){var F=s.getMappedAddressByID(E);if(F){F.active=true}},deactivate:function(E){if(!E){return n.clean()}var F=s.getMappedAddressByID(E);if(F){F.active=false}},autoVerify:function(E){if(typeof E==="undefined"){return u.autoVerify}else{if(E==="disable"||E==="off"||!E){u.autoVerify=false}else{u.autoVerify=true}}},version:d};for(var D in t){x(D)}s.mapFields();return s};function j(){var J;var F={formDataProperty:"smarty-form",identifiers:{streets:{names:["street","address","address1","address2","addr1","addr2","address-1","address-2","address_1","address_2","line","primary"],labels:["street","address","line "," line"]},secondary:{names:["suite","apartment","primary","pmb","secondary"],labels:["suite","apartment","apt:","apt.","ste:","ste.","unit:","unit.","unit ","box","pmb"]},city:{names:["city","town","village","cityname","city-name","city_name","cities"],labels:["city","town","city name"]},state:{names:["state","province","region","section","territory"],labels:["state","province","region","section","territory"]},zipcode:{names:["zip","zipcode","zip-code","zip_code","postal_code","postal-code","postalcode","postcode","post-code","post_code","postal","zcode"],labels:["zip","zip code","postal code","postcode","locality"]},lastline:{names:["lastline","last-line","citystatezip","city-state-zip","city_state_zip"],labels:["last line","city/state/zip","city / state / zip","city - state - zip","city-state-zip","city, state, zip"]},country:{names:["country","nation","sovereignty"],labels:["country","nation","sovereignty"]}},street1exacts:{names:["address","street","address1","streetaddress","street-address","street_address","streetaddr","street-addr","street_addr","str","str1","street1","addr"]},street2:{names:["address2","address_2","address-2","street2","addr2","addr_2","line2","str2","second","two"],labels:[" 2","second ","two"]},exclude:{names:["email","e-mail","e_mail","firstname","first-name","first_name","lastname","last-name","last_name","fname","lname","name","eml","type","township","zip4","plus4","method","location","store","save","keep","phn","phone","cardholder","security","comp","firm","org","addressee","addresses","group","gate","fax","cvc","cvv","file","search","list"],labels:["email","e-mail","e mail"," type","save ","keep","name","method","phone","organization","company","addressee","township","firm","group","gate","cardholder","cvc","cvv","search","file"," list","fax","book"]}};var L;var I=0;var D=[];var z=24,C=8;var N="<style>.smarty-dots { display: none; position: absolute; z-index: 999; width: "+z+"px; height: "+C+"px; background-image: url('data:image/gif;base64,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'); }.smarty-ui { position: absolute; z-index: 99999; text-shadow: none; text-align: left; text-decoration: none; }.smarty-popup { border: 3px solid #4C4C4C; padding: 0; background: #F6F6F6; box-shadow: 0px 10px 35px rgba(0, 0, 0, .8); }.smarty-popup-header { background: #DDD; height: 12px; text-transform: uppercase; font: bold 12px/1em 'Arial Black', sans-serif; padding: 12px; }.smarty-popup-ambiguous-header { color: #333; }.smarty-popup-invalid-header { color: #CC0000; }.smarty-popup-close { color: #CC0000 !important; text-decoration: none !important; position: absolute; right: 15px; top: 10px; display: block; padding: 4px 6px; text-transform: uppercase; }.smarty-popup-close:hover { color: #FFF !important; background: #CC0000; }.smarty-choice-list .smarty-choice { background: #FFF; padding: 10px 15px; color: #1A1A1A; }.smarty-choice { display: block; font: 300 14px/1.5em sans-serif; text-decoration: none !important; border-top: 1px solid #CCC; }.smarty-choice-list .smarty-choice:hover { color: #EEE !important; background: #333; text-decoration: none !important; }.smarty-choice-alt { border-top: 1px solid #4C4C4C; background: #F6F6F6 !important; box-shadow: inset 0 4px 15px -5px rgba(0, 0, 0, .45); }.smarty-choice-alt .smarty-choice-abort, .smarty-choice-override { padding: 6px 15px; color: #B3B3B3 !important; font-size: 12px; text-decoration: none !important; }.smarty-choice-alt .smarty-choice:first-child { border-top: 0; }.smarty-choice-abort:hover { color: #333 !important; }.smarty-choice-override:hover { color: #CC0000 !important; }.smarty-tag { position: absolute; display: block; overflow: hidden; font: 15px/1.2em sans-serif; text-decoration: none !important; width: 20px; height: 18px; border-radius: 25px; transition: all .25s; -moz-transition: all .25s; -webkit-transition: all .25s; -o-transition: all .25s; }.smarty-tag:hover { width: 70px; text-decoration: none !important; color: #999; }.smarty-tag:hover .smarty-tag-text { color: #000 !important; }.smarty-tag-grayed { border: 1px solid #B4B4B4 !important; color: #999 !important; background: #DDD !important; box-shadow: inset 0 9px 15px #FFF; }.smarty-tag-green { border: 1px solid #407513 !important; color: #407513 !important; background: #A6D187 !important; box-shadow: inset 0 9px 15px #E3F6D5; }.smarty-tag-grayed:hover { border-color: #333 !important; }.smarty-tag-check { padding-left: 4px; text-decoration: none !important; }.smarty-tag-text { font-size: 12px !important; position: absolute; top: 0; left: 16px; width: 50px !important; text-align: center !important; }.smarty-autocomplete { border: 1px solid #777; background: white; overflow: hidden; white-space: nowrap; box-shadow: 1px 1px 3px #555; }.smarty-suggestion { display: block; color: #444; text-decoration: none !important; font-size: 12px; padding: 1px 5px; }.smarty-active-suggestion { background: #EEE; color: #000; border: none; outline: none; }.smarty-no-suggestions { padding: 1px 5px; font-size: 12px; color: #AAA; font-style: italic; }</style>";this.postMappingOperations=function(){if(u.ui){f("head").prepend(N);var S=s.getMappedAddresses();for(var V=0;V<S.length;V++){var Q=S[V].id();f("body").append('<div class="smarty-ui"><div title="Loading..." class="smarty-dots smarty-addr-'+Q+'"></div></div>');var T=M(S[V].corners(true));f("body").append('<div class="smarty-ui" style="top: '+T.top+"px; left: "+T.left+'px;"><a href="javascript:" class="smarty-tag smarty-tag-grayed smarty-addr-'+Q+'" title="Address not verified. Click to verify." data-addressid="'+Q+'"><span class="smarty-tag-check">&#10003;</span><span class="smarty-tag-text">Verify</span></a></div>');f(i).resize({addr:S[V]},function(ae){var ah=ae.data.addr;var ag=M(ah.corners(true));f(".smarty-tag.smarty-addr-"+ah.id()).parent(".smarty-ui").css("top",ag.top+"px").css("left",ag.left+"px");var ac=ah.corners();f(".smarty-popup.smarty-addr-"+ah.id()).parent(".smarty-ui").css("top",ac.top+"px").css("left",ac.left+"px");if(u.autocomplete){var af=f(".smarty-autocomplete.smarty-addr-"+ah.id()).closest(".smarty-ui");var ad=ah.getDomFields();if(ad.street){af.css({left:f(ad.street).offset().left+"px",top:(f(ad.street).offset().top+f(ad.street).outerHeight())+"px"})}}});if(!S[V].isDomestic()){var X=f(".smarty-ui .smarty-tag.smarty-addr-"+Q);if(X.is(":visible")){X.hide()}S[V].accept({address:S[V]},false)}}f("body").delegate(".smarty-tag-grayed","click",function(ad){var ac=f(this).data("addressid");s.verify(ac)});f("body").delegate(".smarty-undo","click",function(ad){var ac=f(this).parent().data("addressid");var ae=s.getMappedAddressByID(ac);ae.undo(true)});if(u.autocomplete&&u.key){for(var V=0;V<c.length;V++){var Y=c[V];for(var U=0;U<Y.addresses.length;U++){var Z=Y.addresses[U];var ab=Z.getDomFields();if(ab.street){var aa=f(ab.street);var P=f('<div class="smarty-ui"></div>');var R=f('<div class="smarty-autocomplete"></div>');R.addClass("smarty-addr-"+Z.id());P.data("addrID",Z.id());P.append(R);P.css({position:"absolute",left:aa.offset().left+"px",top:(aa.offset().top+aa.outerHeight())+"px"});P.hide().appendTo("body");P.delegate(".smarty-suggestion","click",{addr:Z,containerUi:P},function(ad){var ac=L.suggestions[f(this).data("suggIndex")];E(ad.data.addr,ac,ad.data.containerUi)});P.delegate(".smarty-suggestion","mouseover",function(){f(".smarty-active-suggestion").removeClass("smarty-active-suggestion");f(this).addClass("smarty-active-suggestion")});P.delegate(".smarty-active-suggestion","mouseleave",function(){f(this).removeClass("smarty-active-suggestion")});aa.attr("autocomplete","off");aa.blur({containerUi:P},function(ac){setTimeout(function(ad){if(ad.data){ad.data.containerUi.hide()}},300,ac)});aa.keydown({containerUi:P,addr:Z},function(af){var ad=f(".smarty-autocomplete",af.data.containerUi);var ac=f(".smarty-active-suggestion:visible",ad).first();var ae=false;if(af.keyCode==9){if(ac.length>0){var ag=af.data.addr.getDomFields();if(ag.zipcode){f(ag.zipcode).focus()}else{f(ag.street).blur()}E(af.data.addr,L.suggestions[ac.data("suggIndex")],af.data.containerUi);return Z.isFreeform()?true:p(af)}else{af.data.containerUi.hide()}return}else{if(af.keyCode==40){if(!ac.hasClass("smarty-suggestion")){ac=f(".smarty-suggestion",ad).first().mouseover();ae=true}if(!ae){if(ac.next(".smarty-addr-"+af.data.addr.id()+" .smarty-suggestion").length>0){ac.next(".smarty-suggestion").mouseover()}else{ac.removeClass("smarty-active-suggestion")}}A(this);return}else{if(af.keyCode==38){if(!ac.hasClass("smarty-suggestion")){ac=f(".smarty-suggestion",ad).last().mouseover();ae=true}if(!ae){if(ac.prev(".smarty-addr-"+af.data.addr.id()+" .smarty-suggestion").length>0){ac.prev(".smarty-suggestion").mouseover()}else{ac.removeClass("smarty-active-suggestion")}}A(this);return}}}});aa.keyup({form:Y,addr:Z,streetField:aa,containerUi:P},K)}}f(o).keyup(function(ac){if(ac.keyCode==27){f(".smarty-autocomplete").closest(".smarty-ui").hide()}})}setTimeout(function(){f(i).resize()},500);setTimeout(function(){f(i).resize()},1500)}}if(u.submitVerify){for(var V=0;V<c.length;V++){var Y=c[V];J=function(ad){if((ad.data.form&&ad.data.form.processing)||f(".smarty-active-suggestion:visible").length>0){return p(ad)}if(!ad.data.form.allActiveAddressesAccepted()){var ac=ad.data.form.activeAddressesNotAccepted();if(ac.length>0){m("VerificationInvoked",{address:ac[0],invoke:ad.data.invoke,invokeFn:ad.data.invokeFn})}return p(ad)}};var O=function(ah,ae){if(!ah||!ae){return}var ag=[],ac=f._data(ah,"events");if(ac&&ac[ae]&&ac[ae].length>0){ag=f.extend(true,[],ac[ae])}f(ah).unbind(ae);f(ah)[ae]({form:Y,invoke:ah,invokeFn:ae},J);if(typeof ah["on"+ae]==="function"){var ad=ah["on"+ae];ah["on"+ae]=null;f(ah)[ae](ad)}for(var af=0;af<ag.length;af++){f(ah)[ae](ag[af].data,ag[af].handler)}};var W=f(u.submitSelector,Y.dom);W.each(function(ac){O(this,"click")});O(Y.dom,"submit")}}m("MapInitialized")};function K(Q){var T=Q.data.addr;var R=Q.data.streetField;var P=f.trim(Q.data.streetField.val());var S=Q.data.containerUi;var O=f(".smarty-autocomplete",S);if(!P){T.lastStreetInput=P;O.empty();S.hide()}if(Q.keyCode==13){if(f(".smarty-active-suggestion:visible").length>0){E(T,L.suggestions[f(".smarty-active-suggestion:visible").first().data("suggIndex")],S)}S.hide();R.blur();return p(Q)}if(Q.keyCode==40){A(R[0]);return}if(Q.keyCode==38){A(R[0]);return}if(!P||P==T.lastStreetInput||!T.isDomestic()){return}T.lastStreetInput=P;m("AutocompleteInvoked",{containerUi:S,suggContainer:O,streetField:R,input:P,addr:T})}this.requestAutocomplete=function(O,P){if(P.input&&P.addr.isDomestic()&&L){P.containerUi.show()}var Q={callback:function(R,T){L=T;P.suggContainer.empty();if(!T.suggestions||T.suggestions.length==0){P.suggContainer.html('<div class="smarty-no-suggestions">No suggestions</div>');return}for(var S=0;S<T.suggestions.length;S++){var U=f('<a href="javascript:" class="smarty-suggestion">'+T.suggestions[S].text+"</a>");U.data("suggIndex",S);P.suggContainer.append(U)}P.suggContainer.css({width:Math.max(P.streetField.outerWidth(),250)+"px"});P.containerUi.show();D.splice(0,R)},number:I++};D[Q.number]=Q;f.getJSON("https://autocomplete-api.smartystreets.com/suggest?callback=?",{"auth-id":u.key,prefix:P.input,city_filter:u.cityFilter,state_filter:u.stateFilter,prefer:u.cityStatePreference,suggestions:u.autocomplete,geolocate:u.geolocate},function(R){m("AutocompleteReceived",f.extend(P,{json:R,autocplrequest:Q}))})};this.showAutocomplete=function(O,P){if(D[P.autocplrequest.number]){D[P.autocplrequest.number].callback(P.autocplrequest.number,P.json)}};function E(R,P,Q){var O=R.getDomFields();Q.hide();if(R.isFreeform()){f(O.street).val(P.text).change()}else{if(O.street){f(O.street).val(P.street_line).change()}if(O.city){f(O.city).val(P.city).change()}if(O.state){f(O.state).val(P.state).change()}if(O.lastline){f(O.lastline).val(P.city+" "+P.state).change()}}}function M(O){return{top:O.top+O.height/2-10,left:O.right-6}}function H(S,W,T){var O=g(S.name);var P=g(S.id);var U=P.replace(/[\[|\]|\(|\)|\:|\'|\"|\=|\||\#|\.|\!|\||\@|\^|\&|\*]/g,"\\\\$&");var Y=g(S.placeholder);var X=g(S.title);for(var R=0;R<W.length;R++){if(O.indexOf(W[R])>-1||P.indexOf(W[R])>-1){return true}}if(!("labels" in S)){var V=f('label[for="'+U+'"]')[0]||f(S).parents("label")[0];S.labels=!V?[]:[V]}for(var R=0;R<S.labels.length;R++){for(var Q=0;Q<T.length;Q++){if(f(S.labels[R]).text().toLowerCase().indexOf(T[Q])>-1){return true}}}for(var R=0;R<T.length;R++){if(Y.indexOf(T[R])>-1||X.indexOf(T[R])>-1){return true}}return false}function G(O,P){f(o).unbind("keyup");f(O).slideUp(l.speed,function(){f(this).parent(".smarty-ui").remove()});m("Completed",P.data)}function B(P){for(var O in P){f("body").undelegate(P[O],"click")}}function A(P){if(typeof P.selectionStart=="number"){P.selectionStart=P.selectionEnd=P.value.length}else{if(typeof P.createTextRange!="undefined"){P.focus();var O=P.createTextRange();O.collapse(false);O.select()}}}this.clean=function(){if(c.length==0){return}if(u.debug){console.log("Cleaning up old form map data and bindings...")}for(var P=0;P<c.length;P++){f(c[P].dom).data(F.formDataProperty,"");for(var O=0;O<c[P].addresses.length;O++){var Q=c[P].addresses[O].getDomFields();for(var R in Q){if(u.debug){f(Q[R]).css("background","none").attr("placeholder","")}f(Q[R]).unbind("change")}if(Q.street){f(Q.street).unbind("keyup").unbind("keydown").unbind("blur")}}f.each(c,function(S){f(this.dom).unbind("submit",J)});f(u.submitSelector,c[P].dom).each(function(S){f(this).unbind("click",J)})}f(".smarty-ui").undelegate(".smarty-suggestion","click").undelegate(".smarty-suggestion","mouseover").undelegate(".smarty-suggestion","mouseleave").remove();f("body").undelegate(".smarty-undo","click");f("body").undelegate(".smarty-tag-grayed","click");f(i).unbind("resize");f(o).unbind("keyup");c=[];y=0;if(u.debug){console.log("Done cleaning up; ready for new mapping.")}};this.automap=function(O){if(u.debug){console.log("Automapping fields...")}this.clean();f("form").each(function(aa){var R=new h(this);var Q={};for(var ab in F.identifiers){var Y=F.identifiers[ab].names;var W=F.identifiers[ab].labels;Q[ab]=f(u.fieldSelector,this).filter(function(){return f(O).has(this).length>0}).filter(":visible").filter(function(){var ac=g(this.name),ag=g(this.id);if(ab=="streets"){for(var ae=0;ae<F.street1exacts.names.length;ae++){if(ac==F.street1exacts.names[ae]||ag==F.street1exacts.names[ae]){return true}}}var ad=H(this,Y,W);if(ab=="streets"){var af=["secondary","city","state","zipcode","country","lastline"];for(var ae=0;ae<af.length;ae++){if(H(this,F.identifiers[af[ae]].names,F.identifiers[af[ae]].labels)){return false}}}return ad}).not(function(){var ac=g(this.name),ad=g(this.id);if(ac=="name"||ad=="name"){return true}return H(this,F.exclude.names,F.exclude.labels)}).toArray()}Q.street=[],Q.street2=[];if(Q.streets.length<=Q.city.length*1.5||Q.streets.length<=Q.zipcode.length*1.5){Q.street=Q.streets}else{for(var V=0;V<Q.streets.length;V++){var X=Q.streets[V];if(H(X,F.street2.names,F.street2.labels)||(V>0&&X.name==Q.streets[V-1].name)){Q.street2.push(X)}else{Q.street.push(X)}}}delete Q.streets;if(u.debug){console.log("For form "+aa+", the initial scan found these fields:",Q)}var P=Math.max(Q.street.length,Q.street2.length);if(u.debug&&P==0){console.log("No addresses were found in form "+aa+".")}for(var V=0;V<P;V++){var U={};for(var Z in Q){var X=Q[Z][V];if(X){U[Z]=X}}var T=U.zipcode||(U.state&&U.city);var S=U.city||U.state||U.zipcode;if((!U.street&&T)||(U.street&&!T&&S)){if(u.debug){console.log("Form "+aa+" contains some address input elements that could not be resolved to a complete address.")}continue}R.addresses.push(new q(U,R,"auto"+(++y)))}c.push(R);if(u.debug){console.log("Form "+aa+" is finished:",R)}});if(u.debug){console.log("Automapping complete.")}m("FieldsMapped")};this.mapFields=function(O,Q){if(u.debug){console.log("Manually mapping fields given this data:",O)}this.clean();var V=[];O=O instanceof Array?O:[O];for(var W in O){var X=O[W];if(!X.street){continue}for(var U in X){if(U!="id"){if(!r(e,U)){if(u.debug){console.log("NOTICE: Field named "+U+" is not allowed. Skipping...")}delete X[U];continue}var R=f(X[U],Q);if(R.length==0){if(u.debug){console.log("NOTICE: No matches found for selector "+X[U]+". Skipping...")}delete X[U];continue}else{if(R.parents("form").length==0){if(u.debug){console.log('NOTICE: Element with selector "'+X[U]+'" is not inside a <form> tag. Skipping...')}delete X[U];continue}else{X[U]=R[0]}}}}if(!((X.street)&&(((X.city)&&(X.state))||(X.zipcode)||(X.lastline)||(!X.street2&&!X.city&&!X.state&&!X.zipcode&&!X.lastline)))){if(u.debug){console.log("NOTICE: Address map (index "+W+") was not mapped to a complete street address. Skipping...")}continue}var T=f(X.street).parents("form")[0];var P=new h(T);if(!f(T).data(F.formDataProperty)){f(T).data(F.formDataProperty,1);V.push(P)}else{for(var S=0;S<V.length;S++){if(V[S].dom==T){P=V[S];break}}}y++;P.addresses.push(new q(X,P,X.id));if(u.debug){console.log("Finished mapping address with ID: "+P.addresses[P.addresses.length-1].id())}}c=V;m("FieldsMapped")};this.disableFields=function(P){if(!u.ui){return}var O=P.getDomFields();for(var R in O){f(O[R]).prop?f(O[R]).prop("disabled",true):f(O[R]).attr("disabled","disabled")}if(P.form&&P.form.dom){var Q=f(u.submitSelector,P.form.dom);Q.prop?Q.prop("disabled",true):Q.attr("disabled","disabled")}};this.enableFields=function(P){if(!u.ui){return}var O=P.getDomFields();for(var R in O){f(O[R]).prop?f(O[R]).prop("disabled",false):f(O[R]).removeAttr("disabled")}if(P.form&&P.form.dom){var Q=f(u.submitSelector,P.form.dom);Q.prop?Q.prop("disabled",false):Q.removeAttr("disabled")}};this.showLoader=function(Q){if(!u.ui||!Q.hasDomFields()){return}var O=Q.corners(true);var P=f(".smarty-dots.smarty-addr-"+Q.id()).parent();P.css("top",(O.top+O.height/2-C/2)+"px").css("left",(O.right-z-10)+"px");f(".smarty-dots",P).show()};this.hideLoader=function(O){if(u.ui){f(".smarty-dots.smarty-addr-"+O.id()).hide()}};this.markAsValid=function(P){if(!u.ui||!P){return}var O=f(".smarty-tag.smarty-tag-grayed.smarty-addr-"+P.id());O.removeClass("smarty-tag-grayed").addClass("smarty-tag-green").attr("title","Address verified! Click to undo.");f(".smarty-tag-text",O).text("Verified").hover(function(){f(this).text("Undo")},function(){f(this).text("Verified")}).addClass("smarty-undo")};this.unmarkAsValid=function(Q){var P=".smarty-tag.smarty-addr-"+Q.id();if(!u.ui||!Q||f(P).length==0){return}var O=f(".smarty-tag.smarty-tag-green.smarty-addr-"+Q.id());O.removeClass("smarty-tag-green").addClass("smarty-tag-grayed").attr("title","Address not verified. Click to verify.");f(".smarty-tag-text",O).text("Verify").unbind("mouseenter mouseleave").removeClass("smarty-undo")};this.showAmbiguous=function(R){if(!u.ui||!R.address.hasDomFields()){return}var V=R.address;var P=R.response;var U=V.corners();U.width=Math.max(U.width,300);U.height=Math.max(U.height,P.length*63+119);var T='<div class="smarty-ui" style="top: '+U.top+"px; left: "+U.left+"px; width: "+U.width+"px; height: "+U.height+'px;"><div class="smarty-popup smarty-addr-'+V.id()+'" style="width: '+(U.width-6)+"px; height: "+(U.height-3)+'px;"><div class="smarty-popup-header smarty-popup-ambiguous-header">'+u.ambiguousMessage+'<a href="javascript:" class="smarty-popup-close smarty-abort" title="Cancel">x</a></div><div class="smarty-choice-list">';for(var S=0;S<P.raw.length;S++){var W=P.raw[S].delivery_line_1,Q=P.raw[S].components.city_name,X=P.raw[S].components.state_abbreviation,O=P.raw[S].components.zipcode+"-"+P.raw[S].components.plus4_code;T+='<a href="javascript:" class="smarty-choice" data-index="'+S+'">'+W+"<br>"+Q+", "+X+" "+O+"</a>"}T+='</div><div class="smarty-choice-alt">';T+='<a href="javascript:" class="smarty-choice smarty-choice-abort smarty-abort">Click here to change your address</a>';T+='<a href="javascript:" class="smarty-choice smarty-choice-override">Click here to certify the address is correct<br>('+V.toString()+")</a>";T+="</div></div></div>";f(T).hide().appendTo("body").show(l.speed);if(f(o).scrollTop()>U.top-100||f(o).scrollTop()<U.top-f(i).height()+100){f("html, body").stop().animate({scrollTop:f(".smarty-popup.smarty-addr-"+V.id()).offset().top-100},500)}R.selectors={goodAddr:".smarty-popup.smarty-addr-"+V.id()+" .smarty-choice-list .smarty-choice",useOriginal:".smarty-popup.smarty-addr-"+V.id()+" .smarty-choice-override",abort:".smarty-popup.smarty-addr-"+V.id()+" .smarty-abort"};f("body").delegate(R.selectors.goodAddr,"click",R,function(Y){f(".smarty-popup.smarty-addr-"+V.id()).slideUp(l.speed,function(){f(this).parent(".smarty-ui").remove();f(this).remove()});B(Y.data.selectors);delete Y.data.selectors;m("UsedSuggestedAddress",{address:Y.data.address,response:Y.data.response,invoke:Y.data.invoke,invokeFn:Y.data.invokeFn,chosenCandidate:P.raw[f(this).data("index")]})});f("body").delegate(R.selectors.useOriginal,"click",R,function(Y){f(this).parents(".smarty-popup").slideUp(l.speed,function(){f(this).parent(".smarty-ui").remove();f(this).remove()});B(Y.data.selectors);delete Y.data.selectors;m("OriginalInputSelected",Y.data)});f(o).keyup(R,function(Y){if(Y.keyCode==27){B(Y.data.selectors);delete Y.data.selectors;G(f(".smarty-popup.smarty-addr-"+Y.data.address.id()),Y);p(Y)}});f("body").delegate(R.selectors.abort,"click",R,function(Y){B(Y.data.selectors);delete Y.data.selectors;G(f(this).parents(".smarty-popup"),Y)})};this.showInvalid=function(R){if(!u.ui||!R.address.hasDomFields()){return}var S=R.address;var P=R.response;var O=S.corners();O.width=Math.max(O.width,300);O.height=Math.max(O.height,180);var Q='<div class="smarty-ui" style="top: '+O.top+"px; left: "+O.left+"px; width: "+O.width+"px; height: "+O.height+'px;"><div class="smarty-popup smarty-addr-'+S.id()+'" style="width: '+(O.width-6)+"px; height: "+(O.height-3)+'px;"><div class="smarty-popup-header smarty-popup-invalid-header">'+u.invalidMessage+'<a href="javascript:" class="smarty-popup-close smarty-abort" title="Cancel">x</a></div><div class="smarty-choice-list"><a href="javascript:" class="smarty-choice smarty-choice-abort smarty-abort">Click here to change your address</a></div><div class="smarty-choice-alt"><a href="javascript:" class="smarty-choice smarty-choice-override">Click here to certify the address is correct<br>('+S.toString()+")</a></div></div></div>";f(Q).hide().appendTo("body").show(l.speed);R.selectors={useOriginal:".smarty-popup.smarty-addr-"+S.id()+" .smarty-choice-override ",abort:".smarty-popup.smarty-addr-"+S.id()+" .smarty-abort"};if(f(o).scrollTop()>O.top-100||f(o).scrollTop()<O.top-f(i).height()+100){f("html, body").stop().animate({scrollTop:f(".smarty-popup.smarty-addr-"+S.id()).offset().top-100},500)}f("body").delegate(R.selectors.abort,"click",R,function(T){G(".smarty-popup.smarty-addr-"+T.data.address.id(),T);delete T.data.selectors;m("InvalidAddressRejected",T.data)});f("body").delegate(R.selectors.useOriginal,"click",R,function(T){G(".smarty-popup.smarty-addr-"+T.data.address.id(),T);delete T.data.selectors;m("OriginalInputSelected",T.data)});f(o).keyup(R,function(T){if(T.keyCode==27){f(R.selectors.abort).click();B(T.data.selectors);G(".smarty-popup.smarty-addr-"+T.data.address.id(),T)}})};this.isDropdown=function(O){return O&&((O.tagName||O.nodeName||"").toUpperCase()=="SELECT")}}function q(D,B,A){var C=this;var z;var G;var E="accepted";var F=function(P,O,N,K,H,I){if(!r(e,P)){return false}if(!z[P]){z[P]={}}var J=z[P].value!=O;z[P].undo=z[P].value||"";z[P].value=O;if(N&&z[P].dom){f(z[P].dom).val(O)}var L={sourceEvent:H,field:P,address:C,value:O,suppressAutoVerification:I||false};if(J&&!K){n.unmarkAsValid(C);var M=u.ui?f(".smarty-ui .smarty-tag.smarty-addr-"+G):undefined;if(C.isDomestic()){if(M&&!M.is(":visible")){M.show()}C.unaccept();m("AddressChanged",L)}else{if(M&&M.is(":visible")){M.hide()}C.accept({address:C},false)}}return true};this.form=B;this.verifyCount=0;this.lastField;this.active=true;this.lastStreetInput="";this.load=function(N,I){z={};G=I?I.replace(/[^a-z0-9_\-]/ig,""):w(1,99999);if(typeof N==="object"){this.lastField=N.lastline||N.zipcode||N.state||N.city||N.street;var M=true;for(var H in N){if(!r(e,H)){continue}var K=f(N[H]),J,O=K.toArray();var P=O?O.length==0:false;if(P){J=N[H]||""}else{J=K.val()||""}z[H]={};z[H].value=J;z[H].undo=J;M=M?J.length==0||n.isDropdown(N[H]):false;if(!P){if(u.debug){K.css("background","#FFFFCC");K.attr("placeholder",H+":"+G)}z[H].dom=N[H]}var L={address:this,field:H,value:J};f(N[H]).change(L,function(Q){Q.data.address.set(Q.data.field,Q.target.value,false,false,Q,false)})}if(!M){E="changed"}}};this.load(D,A);this.set=function(K,M,J,H,I,L){if(typeof K==="string"&&arguments.length>=2){return F(K,M,J,H,I,L)}else{if(typeof K==="object"){var O=true;for(var N in K){O=F(N,K[N],J,H,I,L)?O:false}return O}}};this.replaceWith=function(K,H,J){if(typeof K==="array"&&K.length>0){K=K[0]}if(C.isFreeform()){var I=(K.addressee?K.addressee+" ":"")+(K.delivery_line_1?K.delivery_line_1+" ":"")+(K.delivery_line_2?K.delivery_line_2+" ":"")+(K.components.urbanization?K.components.urbanization+" ":"")+(K.last_line?K.last_line:"");C.set("street",I,H,true,J,false)}else{if(K.addressee){C.set("addressee",K.addressee,H,true,J,false)}if(K.delivery_line_1){C.set("street",K.delivery_line_1,H,true,J,false)}if(K.last_line&&z.lastline){C.set("lastline",K.last_line,H,true,J,false)}C.set("street2",K.delivery_line_2||"",H,true,J,false);C.set("secondary","",H,true,J,false);if(K.components.urbanization){C.set("urbanization",K.components.urbanization,H,true,J,false)}if(K.components.city_name){C.set("city",K.components.city_name,H,true,J,false)}if(K.components.state_abbreviation){C.set("state",K.components.state_abbreviation,H,true,J,false)}if(K.components.zipcode&&K.components.plus4_code){C.set("zipcode",K.components.zipcode+"-"+K.components.plus4_code,H,true,J,false)}}};this.corners=function(I){var H={};if(!I){for(var M in z){if(!z[M].dom||!f(z[M].dom).is(":visible")){continue}var L=z[M].dom;var K=f(L).offset();K.right=K.left+f(L).outerWidth();K.bottom=K.top+f(L).outerHeight();H.top=!H.top?K.top:Math.min(H.top,K.top);H.left=!H.left?K.left:Math.min(H.left,K.left);H.right=!H.right?K.right:Math.max(H.right,K.right);H.bottom=!H.bottom?K.bottom:Math.max(H.bottom,K.bottom)}}else{var J=f(C.lastField);H=J.offset();H.right=H.left+J.outerWidth();H.bottom=H.top+J.outerHeight()}H.width=H.right-H.left;H.height=H.bottom-H.top;return H};this.verify=function(I,K){if(!I&&!C.enoughInput()){if(u.debug){console.log("NOTICE: The address does not have enough input to verify. Since no callback is specified, there is nothing to do.")}return m("Completed",{address:C,invoke:I,invokeFn:K,response:new a([])})}if(!C.enoughInput()){return m("AddressWasInvalid",{address:C,response:new a([]),invoke:I,invokeFn:K})}n.disableFields(C);C.verifyCount++;var H=C.toRequest();var J=u.token?"auth-id="+encodeURIComponent(u.key)+"&auth-token="+encodeURIComponent(u.token):"auth-token="+encodeURIComponent(u.key);f.ajax({url:u.requestUrl+"?"+J+"&plugin="+encodeURIComponent(s.version)+(u.debug?"_debug":"")+"&callback=?",dataType:"jsonp",data:H,timeout:u.timeout}).done(function(L,M,N){m("ResponseReceived",{address:C,response:new a(L),invoke:I,invokeFn:K})}).fail(function(M,L){m("RequestTimedOut",{address:C,status:L,invoke:I,invokeFn:K});C.verifyCount--});m("RequestSubmitted",{address:C})};this.enoughInput=function(){return(z.street&&z.street.value)&&(((z.city&&z.city.value)&&(z.state&&z.state.value&&z.state.value.length>1))||(z.zipcode&&z.zipcode.value)||(z.lastline&&z.lastline.value)||(!z.street2&&!z.city&&!z.state&&!z.zipcode&&!z.lastline))};this.toRequest=function(){var J={};for(var I in z){var H={};H[I]=z[I].value.replace(/\r|\n/g," ");f.extend(J,H)}return f.extend(J,{candidates:u.candidates})};this.toString=function(){return(z.street?z.street.value+" ":"")+(z.street2?z.street2.value+" ":"")+(z.secondary?z.secondary.value+" ":"")+(z.city?z.city.value+" ":"")+(z.state?z.state.value+" ":"")+(z.zipcode?z.zipcode.value:"")};this.abort=function(I,H){H=typeof H==="undefined"?false:H;if(!H){C.unaccept()}delete C.form.processing;return p(I)};this.isFreeform=function(){return z.street&&!z.street2&&!z.secondary&&!z.addressee&&!z.city&&!z.state&&!z.zipcode&&!z.urbanization&&!z.lastline};this.get=function(H){return z[H]?z[H].value:null};this.undo=function(H){H=typeof H==="undefined"?true:H;for(var I in z){this.set(I,z[I].undo,H,false,undefined,true)}};this.accept=function(I,H){H=typeof H==="undefined"?true:H;E="accepted";n.enableFields(C);if(H){n.markAsValid(C)}m("AddressAccepted",I)};this.unaccept=function(){E="changed";n.unmarkAsValid(C);return C};this.getUndoValue=function(H){return z[H].undo};this.status=function(){return E};this.getDomFields=function(){var I={};for(var J in z){var H={};H[J]=z[J].dom;f.extend(I,H)}return I};this.hasDomFields=function(){for(var H in z){if(z[H].dom){return true}}};this.isDomestic=function(){if(!z.country){return true}var H=z.country.value.toUpperCase().replace(/\.|\s|\(|\)|\\|\/|-/g,"");var I=["","0","1","COUNTRY","NONE","US","USA","USOFA","USOFAMERICA","AMERICAN","UNITEDSTATES","UNITEDSTATESAMERICA","UNITEDSTATESOFAMERICA","AMERICA","840","223","AMERICAUNITEDSTATES","AMERICAUS","AMERICAUSA"];return r(I,H)||z.country.value=="-1"};this.autocompleteVisible=function(){return u.ui&&u.autocomplete&&f(".smarty-autocomplete.smarty-addr-"+C.id()).is(":visible")};this.id=function(){return G}}function h(z){this.addresses=[];this.dom=z;this.activeAddressesNotAccepted=function(){var B=[];for(var A=0;A<this.addresses.length;A++){var C=this.addresses[A];if(C.status()!="accepted"&&C.active){B.push(C)}}return B};this.allActiveAddressesAccepted=function(){return this.activeAddressesNotAccepted().length==0}}function a(z){var B=function(C){if(C>=z.length||C<0){if(z.length==0){throw new Error("Candidate index is out of bounds (no candidates returned; requested "+C+")")}else{throw new Error("Candidate index is out of bounds ("+z.length+" candidates; indicies 0 through "+(z.length-1)+" available; requested "+C+")")}}};var A=function(C){return typeof C==="undefined"?0:C};this.raw=z;this.length=z.length;this.isValid=function(){return this.length==1};this.isInvalid=function(){return this.length==0};this.isAmbiguous=function(){return this.length>1};this.isMissingSecondary=function(C){C=A(C);B(C);return this.raw[C].analysis.dpv_footnotes.indexOf("N1")>-1||this.raw[C].analysis.dpv_footnotes.indexOf("R1")>-1||(this.raw[C].analysis.footnotes&&this.raw[C].analysis.footnotes.indexOf("H#")>-1)};this.isBadSecondary=function(C){C=A(C);B(C);return this.raw[C].analysis.footnotes&&this.raw[C].analysis.footnotes.indexOf("S#")>-1};this.componentChanged=function(C){C=A(C);B(C);return this.raw[C].analysis.footnotes&&this.raw[C].analysis.footnotes.indexOf("L#")>-1};this.betterAddressExists=function(C){C=A(C);B(C);return this.raw[C].analysis.footnotes&&this.raw[C].analysis.footnotes.indexOf("P#")>-1};this.isExactMatch=function(C){C=A(C);B(C);return this.raw[C].analysis.footnotes&&this.raw[C].analysis.dpv_footnotes=="AABB"};this.isUniqueZipCode=function(C){C=A(C);B(C);return this.raw[C].analysis.dpv_footnotes.indexOf("U1")>-1||(this.raw[C].analysis.footnotes&&this.raw[C].analysis.footnotes.indexOf("Q#")>-1)};this.fixedAbbreviations=function(C){C=A(C);B(C);return this.raw[C].analysis.footnotes&&this.raw[C].analysis.footnotes.indexOf("N#")>-1};this.fixedZipCode=function(C){C=A(C);B(C);return this.raw[C].analysis.footnotes&&this.raw[C].analysis.footnotes.indexOf("A#")>-1};this.fixedSpelling=function(C){C=A(C);B(C);return this.raw[C].analysis.footnotes.indexOf("B#")>-1||(this.raw[C].analysis.footnotes&&this.raw[C].analysis.footnotes.indexOf("M#")>-1)};this.isBuildingDefault=function(C){C=A(C);B(C);return this.raw[C].metadata.building_default_indicator};this.isMilitary=function(C){C=A(C);B(C);return this.raw[C].analysis.dpv_footnotes.indexOf("F1")>-1};this.hasExtraSecondary=function(C){C=A(C);B(C);return this.raw[C].analysis.dpv_footnotes.indexOf("CC")>-1};this.isLacsLink=function(C){C=A(C);B(C);return this.raw[C].analysis.lacslink_code=="A"};this.isCommercial=function(C){C=A(C);B(C);return this.raw[C].metadata.rdi=="Commercial"};this.isResidential=function(C){C=A(C);B(C);return this.raw[C].metadata.rdi=="Residential"}}function b(A,B){var z=t[A.type];if(z){z(A,B)}}var k=function(z,A){if(z&&typeof z!=="function"&&A){if(A=="click"){f(z).trigger("click")}else{if(A=="submit"){f(z).submit()}}}};var t={FieldsMapped:function(z,A){if(u.debug){console.log("EVENT:","FieldsMapped","(Fields mapped to their respective addresses)",z,A)}i.loaded?n.postMappingOperations():f(i).load(n.postMappingOperations)},MapInitialized:function(z,A){if(u.debug){console.log("EVENT:","MapInitialized","(Mapped fields have been wired up to the window"+(u.ui?", document, and UI":" and document")+")",z,A)}},AutocompleteInvoked:function(z,A){if(u.debug){console.log("EVENT:","AutocompleteInvoked","(A request is about to be sent to the autocomplete service)",z,A)}n.requestAutocomplete(z,A)},AutocompleteReceived:function(z,A){if(u.debug){console.log("EVENT:","AutocompleteReceived","(A response has just been received from the autocomplete service)",z,A)}n.showAutocomplete(z,A)},AddressChanged:function(z,A){if(u.debug){console.log("EVENT:","AddressChanged","(Address changed)",z,A)}if(u.autoVerify&&A.address.enoughInput()&&(A.address.verifyCount==0||A.address.isFreeform())&&!A.suppressAutoVerification&&A.address.hasDomFields()&&A.address.active&&!A.address.autocompleteVisible()&&(A.address.form&&!A.address.form.processing)){m("VerificationInvoked",{address:A.address})}},VerificationInvoked:function(z,A){if(u.debug){console.log("EVENT:","VerificationInvoked","(Address verification invoked)",z,A)}if(!A.address||(A.address&&A.address.form&&A.address.form.processing)){if(u.debug){console.log("NOTICE: VerificationInvoked event handling aborted. Address is missing or an address in the same form is already processing.")}return}else{if(A.address.status()=="accepted"&&!A.verifyAccepted){if(u.debug){console.log("NOTICE: VerificationInvoked raised on an accepted or un-changed address. Nothing to do.")}return m("Completed",A)}else{if(A.address.form){A.address.form.processing=true}}}A.address.verify(A.invoke,A.invokeFn)},RequestSubmitted:function(z,A){if(u.debug){console.log("EVENT:","RequestSubmitted","(Request submitted to server)",z,A)}n.showLoader(A.address)},ResponseReceived:function(z,A){if(u.debug){console.log("EVENT:","ResponseReceived","(Response received from server, but has not been inspected)",z,A)}n.hideLoader(A.address);if(typeof A.invoke==="function"){A.invoke(A.response)}else{if(A.response.isInvalid()){m("AddressWasInvalid",A)}else{if(A.response.isValid()){m("AddressWasValid",A)}else{m("AddressWasAmbiguous",A)}}}},RequestTimedOut:function(z,A){if(u.debug){console.log("EVENT:","RequestTimedOut","(Request timed out)",z,A)}if(A.address.form){delete A.address.form.processing}if(A.invoke){A.address.accept(A,false)}n.enableFields(A.address);n.hideLoader(A.address)},AddressWasValid:function(z,A){if(u.debug){console.log("EVENT:","AddressWasValid","(Response indicates input address was valid)",z,A)}var C=A.address;var B=A.response;A.response.chosen=B.raw[0];C.replaceWith(B.raw[0],true,z);C.accept(A)},AddressWasAmbiguous:function(z,A){if(u.debug){console.log("EVENT:","AddressWasAmbiguous","(Response indiciates input address was ambiguous)",z,A)}n.showAmbiguous(A)},AddressWasInvalid:function(z,A){if(u.debug){console.log("EVENT:","AddressWasInvalid","(Response indicates input address was invalid)",z,A)}n.showInvalid(A)},OriginalInputSelected:function(z,A){if(u.debug){console.log("EVENT:","OriginalInputSelected","(User chose to use original input)",z,A)}A.address.accept(A,false)},UsedSuggestedAddress:function(z,A){if(u.debug){console.log("EVENT:","UsedSuggestedAddress","(User chose to a suggested address)",z,A)}A.response.chosen=A.chosenCandidate;A.address.replaceWith(A.chosenCandidate,true,z);A.address.accept(A)},InvalidAddressRejected:function(z,A){if(u.debug){console.log("EVENT:","InvalidAddressRejected","(User chose to correct an invalid address)",z,A)}if(A.address.form){delete A.address.form.processing}m("Completed",A)},AddressAccepted:function(z,A){if(u.debug){console.log("EVENT:","AddressAccepted","(Address marked accepted)",z,A)}if(!A){A={}}if(A.address&&A.address.form){delete A.address.form.processing}if(A.invoke&&A.invokeFn){k(A.invoke,A.invokeFn)}m("Completed",A)},Completed:function(z,A){if(u.debug){console.log("EVENT:","Completed","(All done)",z,A)}if(A.address){n.enableFields(A.address);if(A.address.form){delete A.address.form.processing}}}};function r(B,A){for(var z in B){if(B[z]===A){return true}}return false}function w(A,z){return Math.floor(Math.random()*(z-A+1))+A}function g(z){return z?z.toLowerCase().replace("[]",""):""}function m(A,z){f(o).triggerHandler(A,z)}function x(z){f(o).bind(z,b)}function p(z){if(!z){return false}if(z.preventDefault){z.preventDefault()}if(z.stopPropagation){z.stopPropagation()}if(z.stopImmediatePropagation){z.stopImmediatePropagation()}z.cancelBubble=true;return false}})(jQuery,window,document);